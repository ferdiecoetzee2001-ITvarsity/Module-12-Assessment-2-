<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width-device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/6b20b1c14d.js" crossorigin="anonymous"></script>
</head>
    <title>Contact book</title>

<body onload="fetchContacts()">
    <div class="container">
		<header class="header">
			
			<form class="search-bar">
				<input type="search-name" class="contact-search" name="search-area" placeholder="Search">
			</form>

			<!--  ADD-CONTACT BUTTON/ICON -->
			
                <button id="addContact" type="button" class="p-2 text-dark" >Add contact</button>
		</header>


    <div class="row container mx-auto">
            <div class="column" id="table">
                Loading contacts....
            </div>
        <br>
        <br>
        
    </div>

<script src="config.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/jquery-3.6.0.min.js"></script>

<script>
    

    document.getElementById("addContact").addEventListener('click', addContact);
   

    
    function fetchContacts(){

        fetch(rootPath + "controller/get-contacts/")
            .then(function(response){
            return response.json();
        })
            .then(function(data){
            displayOutput(data);
        })
    

    }
    
    //displays the data on screen
    function displayOutput(data){
        output = "";
        
        for(a in data){
            output +=`

    

		
		<section class="contacts-library">
			<ul class="contacts-list">
				
				
					<div class="contact-section" onclick="editContact(${data[a].id})">
						<li class="list__item" >

							<p class="contact-name">${data[a].firstname}</p>
							<p class="lastname">${data[a].lastname}</p>
						</li>

						<li class="list__item">
							<i class="fas fa-phone"></i>
							<i class="fas fa-sms text"></i>
                            <i class="fas fa-cog " onclick="editContact(${data[a].id})"></i>
						</li>
					</div>
				</a>
                
                    `
        }
            output +="</table>";
            document.getElementById("table").innerHTML = output;
        
    }
    
    //opens add contact page
    function addContact(){
        window.open("add-contact.html", "_self");
    }
    
    //opens edit contact page
    function editContact(id){
        window.open("edit-contact.html?id=" + id, "_self");
    }

            </script>
        </div>
    </body>
 </html>

  